<script>
{%capture notesvg%}{% include note.svg %}{%endcapture%}
{%capture chevronsvg%}{% include chevron-down.svg %}{%endcapture%}
function toggleBar(toggler){
    toggler.parent().toggleClass("collapsed");
}
$(document).ready(function() {
    $('.post').each(function() {
        $(this).magnificPopup({
            delegate: 'figure.image-fig a',
            type: 'image',
            gallery: {
                enabled: true
            },
            image: {
                titleSrc: function(item) {
                    return item.el.parents('figure').find('figcaption').html();
                },
                markup: '<div class="mfp-figure">'+
                    '<div class="mfp-close"></div>'+
                        '<figure>'+
                            '<div class="mfp-img"></div>'+
                            '<figcaption>'+
                                '<div class="mfp-bottom-bar">'+
                                    '<div class="mfp-title-toggler" onclick="toggleBar($(this));">'+
                                        '<div class="toggler-close">{{ chevronsvg | normalize_whitespace }}</div>'+
                                        '<div class="toggler-open">{{ notesvg | normalize_whitespace }}</div>'+
                                    '</div>'+
                                    '<div class="mfp-title-texts">'+
                                        '<div class="mfp-title"></div>'+
                                        '<div class="mfp-counter"></div>'+
                                    '</div>'+
                                '</div>'+
                            '</figcaption>'+
                        '</figure>'+
                    '</div>'
            }
        });
    });
});
</script>
